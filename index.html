<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculateur de Force d'Impact Fmax</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>
    <div class="container">
        <p align="center">
            <img src="icon-192x192.png" alt="Force d'Impact" style="width:100px;height:100px;">
        </p>

        <hr>

        <h1>Calculateur de Force d'Impact F<sub>max</sub></h1>

        <p align="center">R√©sultat g√©n√©r√© par IA.<br>
            ‚ùó‚ùóLa formule n'est pas v√©rifi√©e.‚ùó‚ùó</p>

        <hr>

        <p class="formula">
            O√π la force d'impact maximale F<sub>max</sub> est calcul√©e par :
            $$
            F_{\text{max}} = m g + \sqrt{(m g)^2 + \frac{m v^2 E A}{L_0}}
            $$
            Avec l'aire de la section transversale:
            $$
            A = \pi \frac{d^2}{4}
            $$
        </p>

        <hr>

        <form id="calcForm">
            <label for="m">Masse de l'objet, m (kg) :</label>
            <input type="number" id="m" value="500" step="any" required>

            <label for="v">Vitesse de descente, v (m/s) :</label>
            <input type="number" id="v" value="0.06" step="any" required>

            <label for="d_mm">Diam√®tre du c√¢ble, d (mm) :</label>
            <input type="number" id="d_mm" value="6" step="any" required>

            <p class="note">‚ö†Ô∏è L'application convertit les mm en m√®tres (m) automatiquement pour le calcul.</p>

            <label for="L0">Longueur du c√¢ble, L‚ÇÄ (m) :</label>
            <input type="number" id="L0" value="10" step="any" required>

            <label for="E">Module de Young de l'acier, E (Pa) :</label>
            <input type="number" id="E" value="200000000000" step="any" required>

            <label for="g">Gravit√©, g (m/s¬≤) :</label>
            <input type="number" id="g" value="9.81" step="any" required>

            <button type="submit">Calculer F<sub>max</sub></button>
        </form>

        <div id="resultat" class="resultat" style="display: none;"></div>

        <hr>

        <p align="center">
            <a href="https://github.com/khabes/Force-Choc">
                <img src="github-mark.png" alt="Github" style="width:56px;height:56px;">
            </a>
        </p>
    </div>

    <script>
        // Fonction JavaScript de Calcul
        function calculerFmax(m, v, d_m, L0, E, g) {
            // d_m est le diam√®tre en m√®tres
            
            // √âtape 1 : Aire de la section transversale (A = œÄ * d¬≤ / 4)
            const A = Math.PI * Math.pow(d_m, 2) / 4;

            // √âtape 2 : Poids / Charge statique (P = m * g)
            const P = m * g;
            
            // √âtape 3 : Terme dynamique sous la racine
            // Terme = (m*g)^2 + (m * v^2 * E * A / L0)
            const termeSousRacine = Math.pow(P, 2) + (m * Math.pow(v, 2) * E * A / L0);

            // √âtape 4 : Force Fmax = P + sqrt(Terme)
            const Fmax = P + Math.sqrt(termeSousRacine);

            return { Fmax, P };
        }

        // Gestion de l'√©v√©nement de soumission du formulaire
        document.getElementById('calcForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Emp√™che le rechargement de la page

            // R√©cup√©ration des valeurs des champs
            const m = parseFloat(document.getElementById('m').value);
            const v = parseFloat(document.getElementById('v').value);
            const d_mm = parseFloat(document.getElementById('d_mm').value);
            const L0 = parseFloat(document.getElementById('L0').value);
            const E = parseFloat(document.getElementById('E').value);
            const g = parseFloat(document.getElementById('g').value);
            
            // Conversion du diam√®tre de mm en m√®tres (S.I. n√©cessaire pour le calcul)
            const d_m = d_mm / 1000;

            // Appel de la fonction de calcul
            const { Fmax, P } = calculerFmax(m, v, d_m, L0, E, g);
            
            // Affichage des r√©sultats
            const resultatDiv = document.getElementById('resultat');
            
            const Fmax_text = Fmax.toLocaleString('fr-FR', { maximumFractionDigits: 2 });
            const P_text = P.toLocaleString('fr-FR', { maximumFractionDigits: 2 });
            const facteur_choc = (Fmax / P).toLocaleString('fr-FR', { maximumFractionDigits: 2 });
            
            resultatDiv.innerHTML = `
                <p>‚úÖ Poids statique (P) : ${P_text} N</p>
                <p>‚úÖ Force d'Impact maximale (F<sub>max</sub>) : ${Fmax_text} N</p>
                <p>üìà Facteur de Choc (F<sub>max</sub> / P) : ${facteur_choc}</p>
            `;
            resultatDiv.style.display = 'block';
        });

    // ENREGISTREMENT DU SERVICE WORKER POUR LA FONCTIONNALIT√â PWA
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./service-worker.js')
          .then(registration => {
            console.log('ServiceWorker enregistr√© avec succ√®s. Scope:', registration.scope);
          })
          .catch(error => {
            console.log('√âchec de l\'enregistrement du ServiceWorker:', error);
          });
      });
    }
</script>
</body>
</html>
